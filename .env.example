# =============================================================================
# Unified Backend Platform - 环境变量配置
# =============================================================================
# 使用方法：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 修改 .env 中的敏感值（密码、密钥等）
# 3. 运行: docker compose up -d

# =============================================================================
# 应用配置
# =============================================================================
ENVIRONMENT=development
APP_NAME=Unified Backend Platform
APP_VERSION=1.0.0

# =============================================================================
# 端口配置
# =============================================================================
# 后端 API 端口
BACKEND_PORT=9000

# MongoDB 端口
MONGO_PORT=27017

# Mongo Express 端口
MONGO_EXPR_PORT=8081

# Redis 端口
REDIS_PORT=6379

# Casdoor 端口
CASDOOR_PORT=8000

# MinIO API 端口
MINIO_API_PORT=9100

# MinIO Console 端口
MINIO_CONSOLE_PORT=9101

# PostgreSQL 端口
POSTGRES_PORT=5432

# =============================================================================
# MongoDB 配置
# =============================================================================
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=change-this-password-in-production
MONGO_DATABASE=unified_backend

# Mongo Express 认证
MONGO_EXPR_USERNAME=admin
MONGO_EXPR_PASSWORD=change-this-password-in-production

# =============================================================================
# PostgreSQL 配置 (仅 Casdoor 使用)
# =============================================================================
POSTGRES_USER=casdoor
POSTGRES_PASSWORD=change-this-password-in-production
POSTGRES_DB=casdoor

# =============================================================================
# Redis 配置
# =============================================================================
# Redis 密码（留空表示无密码，生产环境建议设置）
# REDIS_PASSWORD=your-redis-password

# =============================================================================
# Casdoor / JWT 认证配置
# =============================================================================
# Casdoor 访问地址
CASDOOR_ORIGIN=http://localhost:8000

# JWT 密钥 - 必须至少 32 字符！⚠️ 生产环境必须修改！
JWT_SECRET=change-this-to-a-secure-random-string-at-least-32-characters-long

# JWT 算法 (通常不需要修改)
JWT_ALGORITHM=HS256

# =============================================================================
# MinIO / S3 对象存储配置
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change-this-password-in-production

# 默认创建的存储桶
MINIO_DEFAULT_BUCKETS=unified-files,unified-thumbnails

# MinIO 公共访问 URL
MINIO_PUBLIC_URL=http://localhost:9100

# 存储桶名称
MINIO_BUCKET=unified-files
MINIO_THUMBNAIL_BUCKET=unified-thumbnails

# =============================================================================
# CORS 配置
# =============================================================================
# 允许的前端来源（逗号分隔）
CORS_ORIGINS=http://localhost:3000,http://localhost:3002,http://localhost:8080,http://localhost:9000

# =============================================================================
# 生产环境建议
# =============================================================================
# 1. 修改所有默认密码
# 2. 使用强随机 JWT_SECRET (至少 32 字符)
# 3. 启用 Redis 密码认证
# 4. 配置 HTTPS/SSL 证书
# 5. 限制 CORS_ORIGINS 为实际域名
# 6. 设置防火墙规则
# 7. 定期备份数据库

# =============================================================================
# 安全建议
# =============================================================================
# 生成安全密码的方法:
# openssl rand -base64 32
# 或
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"
